<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
  <link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" />
  <title>地图显示</title>
  <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
<div id="container"></div>
<!-- 加载地图JSAPI脚本 -->
<script src="https://webapi.amap.com/maps?v=1.4.15&key=c0cfc4b18f6a1ee6cb645ee54471276b"></script>
<script>
  var map = new AMap.Map('container', {
    resizeEnable: true, //是否监控地图容器尺寸变化
    zoom:11, //初始化地图层级
    center: [119.107078, 36.70925] //初始化地图中心点
  });

  // 接收来自Flutter App的消息
  // window.flutter_inappwebview.callHandler('messageHandler', "Hello, Flutter").then(function(result) {
  //   // print the output: Hello, Flutter
  //   console.log(result);
  // });
  window.addEventListener("message", function(event) {
    console.log(event.data);
  }, false);

  window.flutter_inappwebview.postMessage(["Hello, WebView"]);

  setInterval(function () {
    // 发送消息到Flutter App
    // window.postMessage(["Hello, WebView"], "*");
    window.flutter_inappwebview.postMessage(["Hello, WebView"]);
  }, 2000);
</script>
</body>
</html>
